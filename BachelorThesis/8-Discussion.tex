\chapter{Discussion}
\section{Introduction}
This chapter will consist of a justification of the group's choices during the construction of the pipeline, changes that were made during the project, and limitations that were encountered.  

\section{Pipeline Design}
%Pipeline design - present and argue our design \\

\section{Chosen branch protection rules}
When deciding which branch protection rules to implement, it is important that securing the branch does not drastically affect the workflow. There are several possible protection rules to enable, described in section \ref{branchprotection}. Though, enabling all of the rules at once may do more harm than good, as every pull request and commit must go through several steps which will make the workflow less efficient. Therefore, selecting only the most useful rules will benefit the development. 
\\~\\
The "Four Eyes Principle" is a mechanism where activities, in this case, pull requests, need approval from two individuals.  This principle is implemented by enabling "Require a pull request before merging", and requiring two approvals before merging. By enabling this rule, the risk of unwanted code being merged into the basecode is lower, without disrupting the work of all developers since only two need to look through the code. \cite{foureyes} 
\\~\\
Another implemented branch rule is requiring signed commits. Signed commits require some pre-configurations, but once that is done, all the developers have to do is enter a passphrase, and the commit is verified. Implementing required signed commits ensures the integrity of the code while the workflow is undisturbed.



%Chosen tools - why, what to think about \\
%sum up\\~\\




%\section{Chosen SAST tool}

\section{Automation}
Automation is the use of \gls{infrastructure as code} to perform tasks, instead of doing them manually. Implementing automation in the organization's systems can eliminate the need for many developers to manage all the different infrastructure elements the organization may have. Furthermore, there are numerous advantages to replacing manual work with automation. It can reduce costs, by replacing the manual work of IT professionals with automated processes or by reducing the need for physical hardware, such as servers, by moving to a cloud-based solution. Automation can also speed up development by automating repetitive tasks, such as testing, building, and deploying code, allowing developers to work on more complex jobs. In addition, it can improve security by reducing the risk of human errors, or by automating security protocols that can help to speed up the detection, verification, and escalation of security issues without the need for manual involvement. The group's decision to use Terraform and construct a pipeline with \gls{infrastructure as code} is mostly based on the benefits mentioned above. Furthermore, the group attempted to automate as many processes as possible in order to remove the need for manual involvement during deployment and testing. \cite{automation} \cite{automationredhat}

Despite the numerous benefits of automating the development processes, the implementation can be time-consuming and require a complex setup. However, once completed, the setup would be significantly less complicated and require less time. A goal should be to create an idempotent process that assures the pipeline's output is consistent every time it is built. Adopting idempotence as a practice in DevOps is an approach during application development that ensures a high-quality experience for both users and software teams. Idempotence eliminates the requirement for post-deployment cleanup, lowering the likelihood of errors. \cite{idempotent}

\section{Revising the Thesis Angle}
When writing the project plan, the group originally planned to write the thesis where various security testing tools would be tested and analyzed, and later on, demonstrate how the different tools could be used together. The main focus would be on the tools, and try to test as many tools as possible. The group found it difficult to create a unique thesis due to previous theses with similar topics. 

After a meeting with our professor Erik Hjelm√•s discussing this issue, the group found an alternative approach for the thesis, based on the discussion with Erik and a report from Usenix \cite{usenixreport} shown to the group. The new approach involved incorporating more practical work with infrastructure-as-code and placing greater focus on utilizing tools that were already integrated into GitHub and AWS as well as implementing best practice security measures. This approach of the thesis seemed to be more aimed at professional life, and what kind of research was needed today.  


\section{Expectation Compared to Reality}
As mentioned in the section \ref{section: Knowledge that had to be acquired}, the group had little to no knowledge about \gls{infrastructure as code}, especially not Terraform. During the work process, the group encountered far more problems with the building of the pipeline with Terraform and \acrshort{aws} than first expected. The group had some experience with Microsoft Azure from previous courses and perhaps thought that \acrshort{aws} was a bit more similar to Azure than it actually is. Additionally, \acrshort{aws} provides a wide range of services that targets the same or similar issues. Choosing these services and connecting them with each other has been a larger challenge than expected. Furthermore, doing all of these configurations using Terraform has made it more challenging.


\section{Limitations}
\subsection{Unexpected Challenges}
Throughout this thesis, the group has met some unexpected challenges. For the practical part, the group did not expect it to take the amount of time it did. However, looking back on the process the group has concluded that the reason behind the delay was mostly due to lack of knowledge for especially Terraform and AWS. There was also a wish to automate the whole practical part so that it would be easier for the stakeholder and others to use the product later, which was also something the group was quite confident in achieving. Nonetheless, this was not achievable mostly because of scope, and it would have increased the work amount because of everything that was needed to do so. When it comes to the theoretical part, there weren't that many unexpected challenges, mostly because the group was aware of what was needed in the thesis in advance. However, the group did not expect it to be that difficult to integrate the practical part of the thesis and make it as smooth as possible.

\subsection{Research}
The group struggled to find proper academic research for their thesis, therefore the majority of their resources came from websites or blog posts. To establish the credibility of these sources, the group either confirmed the author's or company's credibility or cross-referenced the information with additional sources to confirm its accuracy. These precautions were taken to assure the accuracy and validity of the data in the thesis.  


\subsection{Other}
%something else to note?

