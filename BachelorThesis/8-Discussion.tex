\chapter{Discussion}
\section{Introduction}
This chapter will consist of a justification of the group's choices during the construction of the pipeline, changes that were made during the project, and limitations that were encountered.  

\section{Pipeline Design}
%Pipeline design - present and argue our design \\

\section{Our use of the SDLC} %Bytte navn perhaps? 

\section{Chosen branch protection rules}
When deciding which branch protection rules to implement, it is important that securing the branch does not drastically affect the workflow. There are several possible protection rules to enable, described in section \ref{branchprotection}. Though, enabling all of the rules at once may do more harm than good, as every pull request and commit must go through several steps which will make the workflow less efficient. Therefore, selecting only the most useful rules will benefit the development. 
\\~\\
The "Four Eyes Principle" is a mechanism where activities, in this case, pull requests, need approval from two individuals.  This principle is implemented by enabling "Require a pull request before merging", and requiring two approvals before merging. By enabling this rule, the risk of unwanted code being merged into the basecode is lower, without disrupting the work of all developers since only two need to look through the code. \cite{foureyes} 
\\~\\
Another implemented branch rule is requiring signed commits. Signed commits require some pre-configurations, but once that is done, all the developers have to do is enter a passphrase, and the commit is verified. Implementing required signed commits ensures the integrity of the code while the workflow is undisturbed.

\subsection{Why the group did not choose the other branch protections}%Change name perhaps? 
The group chose the particular branch protections based on the functionality and workflow of the repository. Enabling all branch protection rules would make daily activities difficult and the workflow would not be as seamless. Nonetheless, the group does suggest that individuals look into the different branch protection options and activates the ones that are needed. 



\section{The different tools chosen}
Upon evaluating the various tools used to secure the pipeline, the group has formed perspectives and recommendations. 

\subsection{Chosen SAST tool}

\subsection{Chosen DAST tool}

\subsection{Chosen SCA tool}

%Chosen tools - why, what to think about \\
%sum up\\~\\




%\section{Chosen SAST tool}

\section{Automation}
Automation is the use of \gls{infrastructure as code} to perform tasks, instead of doing them manually. Implementing automation in the organization's systems can eliminate the need for many developers to manage all the different infrastructure elements the organization may have. Furthermore, there are numerous advantages to replacing manual work with automation. It can reduce costs, by replacing the manual work of IT professionals with automated processes or by reducing the need for physical hardware, such as servers, by moving to a cloud-based solution. Automation can also speed up development by automating repetitive tasks, such as testing, building, and deploying code, allowing developers to work on more complex jobs. In addition, it can improve security by reducing the risk of human errors, or by automating security protocols that can help to speed up the detection, verification, and escalation of security issues without the need for manual involvement. The group's decision to use Terraform and construct a pipeline with \gls{infrastructure as code} is mostly based on the benefits mentioned above. Furthermore, the group attempted to automate as many processes as possible in order to remove the need for manual involvement during deployment and testing. \cite{automation} \cite{automationredhat}

Despite the numerous benefits of automating the development processes, the implementation can be time-consuming and require a complex setup. However, once completed, the setup would be significantly less complicated and require less time. A goal should be to create an idempotent process that assures the pipeline's output is consistent every time it is built. Adopting idempotence as a practice in DevOps is an approach during application development that ensures a high-quality experience for both users and software teams. Idempotence eliminates the requirement for post-deployment cleanup, lowering the likelihood of errors. \cite{idempotent}

\section{The Use of Framework}
\subsection{SLSA}
%We will wait with this one!
\subsection{SSDF}
While numerous models exist for the \acrlong{sdlc}, only a limited number of them prioritize security. As a result, it is necessary to integrate security into the SDLC models. Utilizing a security-focused framework, such as the \acrshort{ssdf}, as a reference can serve as a starting point for enhancing the security of the software development lifecycle (SDLC). 

In \acrshort{ssdf} documentation one can find different practices that cover a lot of security aspects one can implement into the development process. While the SSDF is a suitable framework for secure software development, they did not explicitly have it in mind while developing and designing the pipeline in the thesis. However, the group believes that the practical work in the thesis aligns with many of the practices and principles of the SSDF, even though it wasn't explicitly followed. 

Implement Supporting Toolchains (PO.3)





\section{Revising the Thesis Angle}
When writing the project plan, the group initially planned to write the thesis where various security testing tools would be tested and analyzed, and later on, demonstrate how the different tools could be used together. The main focus would be on the tools, and try to test as many tools as possible. The group found it difficult to create a unique thesis due to previous theses with similar topics. 

After a meeting with our professor Erik Hjelm√•s discussing this issue, the group found an alternative approach for the thesis, based on the discussion with Erik and a report from Usenix \cite{usenixreport} shown to the group. The new approach involved incorporating more practical work with infrastructure-as-code and focusing on utilizing tools already integrated into GitHub and AWS and implementing best practice security measures. This approach of the thesis seemed to be more aimed at professional life, and what kind of research was needed today.  


\section{Expectation Compared to Reality}
As mentioned in the section \ref{section: Knowledge that had to be acquired}, the group had little to no knowledge about \gls{infrastructure as code}, especially not Terraform. During the work process, the group encountered far more problems with the building of the pipeline with Terraform and \acrshort{aws} than first expected. The group had some experience with Microsoft Azure from previous courses and perhaps thought that \acrshort{aws} was a bit more similar to Azure than it actually is. Additionally, \acrshort{aws} provides a wide range of services that targets the same or similar issues. Choosing these services and connecting them with each other has been a larger challenge than expected. Furthermore, doing all of these configurations using Terraform has made it more challenging.


\section{Limitations}
\subsection{Unexpected Challenges}
Throughout this thesis, the group has met some unexpected challenges. For the practical part, the group did not expect it to take the amount of time it did. However, looking back on the process the group has concluded that the reason behind the delay was mostly due to lack of knowledge for especially Terraform and AWS. There was also a wish to automate the whole practical part so that it would be easier for the stakeholder and others to use the product later, which was also something the group was quite confident in achieving. Nonetheless, this was not achievable mostly because of scope, and it would have increased the work amount because of everything that was needed to do so. When it comes to the theoretical part, there weren't that many unexpected challenges, mostly because the group was aware of what was needed in the thesis in advance. However, the group did not expect it to be that difficult to integrate the practical part of the thesis and make it as smooth as possible.

\subsection{Research}
The group struggled to find proper academic research for their thesis, therefore the majority of their resources came from websites or blog posts. To establish the credibility of these sources, the group either confirmed the author's or company's credibility or cross-referenced the information with additional sources to confirm its accuracy. These precautions were taken to assure the accuracy and validity of the data in the thesis.  


\subsection{Other}
%something else to note?

\section{Our use of the SDLC} %Bytte navn perhaps? 


\section{Critique of the thesis}

\subsection{Not using Framework from the beginning}
At the beginning of the thesis, the group was not familiar with any frameworks, and therefore, did not consider using one. Later, when the group discovered different frameworks, the group decided that it was too late to integrate them into the work. Doing so would have required a significant amount of work in some cases simply not possible because the group was too far into the thesis. A lot of the requirements for the different frameworks was needed to be achieved before the thesis was started. There were also many tasks that needed to be completed if the group were to integrate the framework later in the thesis, which would have added unnecessary complexity to the thesis. The scope did also not specify anything about following a framework, which also made the group decide not to implement one. 
\newpage
\subsubsection{Delays in the beginning}
Initially, the group struggled with understanding the scope given by the stakeholder and the requirements that followed. The group was given a lot of leeway and was told to interpret the scope however suited, which due to lack of knowledge about the topic made it difficult to establish what the scope was really asking. As a result, the group had to invest more time in the beginning, leading to a delayed start of the thesis. 

